{% extends "package/read_base.html" %}

{% block primary_content_inner %}

<link rel="stylesheet" href="/bootstrap-table.css" />

<div class="btn-group">
    <a href="{{ h.url_for('unaids_dataset_releases.release_view', dataset_type=dataset_type, id=pkg.id) }}" class="btn btn-danger">Add a new Release</a>
    <button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown">
        <span class="caret"></span>
    </button>
    <ul class="dropdown-menu">
        <li><a href="{{ h.url_for('unaids_dataset_releases.release_view', dataset_type=dataset_type, id=pkg.id) }}">From the <u>latest version</u> of the dataset</a></li>
        <li><a href="{{ h.url_for('dataset.activity', id=pkg.id, create_release=True) }}">From a <u>past version</u> of the dataset</a></li>
    </ul>
</div>

<br /><br />

<div id="ReleasesTable">
    <table
        data-toggle="table"
        data-classes="table table-borderless"
        data-show-header="false"
        data-pagination="true"
        data-page-size="5"
        data-pagination-parts="pageList"
    >
        <thead style="display: none">
            <tr>
                <th data-field="1" data-width="50"></th>
                <th data-field="2">Release</th>
                <th data-field="3" class="small-column text-right">Created</th>
                <th data-field="4" class="small-column text-right">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for release in dataset_releases %}
            <tr>
                <td class="text-right vertical-align-top">
                    <h4><i class="fa fa-tag text-muted"></i></h4>
                </td>
                <td class="vertical-align-top">
                    <h4><a href="{{ h.url_for('dataset.read', id=pkg_dict.id) }}">{{ release.name }}</a></h4> 
                    <div class="text-muted">{{ release.notes }}</div>
                    <div class="text-muted">Created by <a href="#">{{ release.author }}</a></div>
                    <br>
                </td>
                <td>{{ release.created }}</td>
                <td>
                    <div class="btn-group pull-right btn-group-xs">
                        {% if loop.index == 1 %}
                            <button
                                class="btn btn-default disabled"
                                title="{{ _('Disabled') }}"
                            >
                            <i class="fa fa-refresh"></i>
                            </button>
                        {% else %}
                            <a
                                href="{{ h.url_for('unaids_dataset_releases.release_restore', dataset_type=dataset_type, id=pkg.id, release_id='TODO') }}"
                                class="btn btn-default"
                                title="{{ _('Make release the latest version') }}"
                            ><i class="fa fa-refresh"></i></a>
                        {% endif %}
                        <a
                            href="{{ h.url_for('unaids_dataset_releases.release_view', dataset_type=dataset_type, id=pkg.id, release_id='TODO') }}"
                            class="btn btn-default"
                            title="{{ _('Make release the latest version') }}"
                        ><i class="fa fa-pencil"></i></a>
                        <a
                            href="{{ h.url_for('unaids_dataset_releases.release_delete', dataset_type=dataset_type, id=pkg.id, release_id='TODO') }}"
                            class="btn btn-default"
                            title="{{ _('Delete Release') }}"
                        ><i class="fa fa-trash"></i></a>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}
